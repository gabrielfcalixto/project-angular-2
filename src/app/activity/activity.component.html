<p-card header="Atividades do Projeto">
  <p-button label="Adicionar Atividade" icon="pi pi-plus" (click)="openAddDialog()" class="p-button-success mb-3"></p-button>

  <p-table [value]="activities" [paginator]="true" [rows]="5">
    <ng-template pTemplate="header">
      <tr>
        <th>Nome</th>
        <th>Descrição</th>
        <th>Horas</th>
        <th>Status</th>
        <th>Ações</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-activity>
      <tr>
        <td>{{ activity.name }}</td>
        <td>{{ activity.description }}</td>
        <td>{{ activity.hours }}</td>
        <td>
          <span [ngClass]="{'text-success': activity.completed, 'text-danger': !activity.completed}">
            {{ activity.completed ? 'Concluído' : 'Pendente' }}
          </span>
        </td>
        <td>
          <p-button icon="pi pi-clock" label="Adicionar Horas" (click)="openAddHoursDialog(activity)" class="p-button-info p-button-sm"></p-button>
          <p-button icon="pi pi-check" (click)="completeActivity(activity)" class="p-button-success p-button-sm"></p-button>
          <p-button icon="pi pi-pencil" (click)="openEditDialog(activity)" class="p-button-warning p-button-sm"></p-button>
          <p-button icon="pi pi-trash" (click)="confirmDelete(activity)" class="p-button-danger p-button-sm"></p-button>
        </td>
      </tr>
    </ng-template>
  </p-table>
</p-card>

<!-- Diálogo para Adicionar Atividade -->
<p-dialog header="Adicionar Atividade" [(visible)]="displayAddDialog" [modal]="true">
  <div class="p-fluid">
    <div class="p-field">
      <label for="nome">Nome</label>
      <input id="nome" type="text" pInputText [(ngModel)]="newActivity.name">
    </div>
    <div class="p-field">
      <label for="descricao">Descrição</label>
      <input id="descricao" type="text" pInputText [(ngModel)]="newActivity.description">
    </div>
    <div class="p-field">
      <label for="horas">Horas</label>
      <input id="horas" type="number" pInputText [(ngModel)]="newActivity.hours">
    </div>
    <p-button label="Salvar" icon="pi pi-check" (click)="addActivity()" class="p-button-success"></p-button>
  </div>
</p-dialog>

<!-- Diálogo para Editar Atividade -->
<p-dialog header="Editar Atividade" [(visible)]="displayEditDialog" [modal]="true">
  <div class="p-fluid" *ngIf="selectedActivity">
    <div class="p-field">
      <label for="editNome">Nome</label>
      <input id="editNome" type="text" pInputText [(ngModel)]="selectedActivity.name">
    </div>
    <div class="p-field">
      <label for="editDescricao">Descrição</label>
      <input id="editDescricao" type="text" pInputText [(ngModel)]="selectedActivity.description">
    </div>
    <p-button label="Salvar Alterações" icon="pi pi-check" (click)="saveEdit()" class="p-button-warning"></p-button>
  </div>
</p-dialog>

<!-- Diálogo de Confirmação de Exclusão -->
<p-confirmDialog
  header="Confirmar Exclusão"
  icon="pi pi-exclamation-triangle"
  [(visible)]="displayDeleteDialog">

  <p>Tem certeza que deseja excluir esta atividade?</p>

  <p-footer>
    <p-button
      label="Não"
      icon="pi pi-times"
      (click)="displayDeleteDialog = false"
      class="p-button-text">
    </p-button>
    <p-button
      label="Sim"
      icon="pi pi-check"
      (click)="deleteActivity()"
      class="p-button-danger">
    </p-button>
  </p-footer>
</p-confirmDialog>

<!-- Diálogo para Adicionar Horas -->
<p-dialog header="Adicionar Horas" [(visible)]="displayAddHoursDialog" [modal]="true">
  <div class="p-fluid">
    <div class="p-field">
      <label for="hoursToAdd">Horas a adicionar</label>
      <input id="hoursToAdd" type="number" pInputText [(ngModel)]="hoursToAdd" min="0" />
    </div>
    <p-footer>
      <p-button label="Cancelar" icon="pi pi-times" (click)="displayAddHoursDialog = false" class="p-button-text"></p-button>
      <p-button label="Adicionar" icon="pi pi-check" (click)="addActivityHours()" class="p-button-success"></p-button>
    </p-footer>
  </div>
</p-dialog>

